{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,Link}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[stats,setStats]=useState({totalMessages:0,unreadMessages:0,lastMessageDate:null});const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);const navigate=useNavigate();// Fetch dashboard statistics\nuseEffect(()=>{const fetchDashboardStats=async()=>{try{// Get the admin token from localStorage\nconst token=localStorage.getItem('adminToken');// If no token, redirect to login\nif(!token){navigate('/admin/login');return;}// Fetch dashboard stats with authorization header\nconst response=await axios.get('/api/admin/dashboard-stats',{headers:{'Authorization':`Bearer ${token}`}});setStats(response.data);setIsLoading(false);}catch(err){var _err$response;setError('Failed to fetch dashboard statistics');setIsLoading(false);// If unauthorized, redirect to login\nif(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401){navigate('/admin/login');}}};fetchDashboardStats();},[navigate]);// Logout handler\nconst handleLogout=()=>{// Remove the admin token\nlocalStorage.removeItem('adminToken');// Redirect to login page\nnavigate('/admin/login');};// Handle loading and error states\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xl\",children:\"Loading dashboard...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:error})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded\",children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-md rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Messages\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Messages: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:stats.totalMessages})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Unread Messages: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-red-500\",children:stats.unreadMessages})]}),stats.lastMessageDate&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Last Message: \",new Date(stats.lastMessageDate).toLocaleString()]})]}),/*#__PURE__*/_jsx(Link,{to:\"/admin/messages\",className:\"mt-4 block text-center bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded\",children:\"View Messages\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-md rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Quick Actions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/messages\",className:\"block bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded text-center\",children:\"Manage Messages\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-md rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"System Information\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Last Login: \",new Date().toLocaleString()]})})]})]})]})});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Link","axios","jsx","_jsx","jsxs","_jsxs","Dashboard","stats","setStats","totalMessages","unreadMessages","lastMessageDate","isLoading","setIsLoading","error","setError","navigate","fetchDashboardStats","token","localStorage","getItem","response","get","headers","data","err","_err$response","status","handleLogout","removeItem","className","children","onClick","Date","toLocaleString","to"],"sources":["/Users/deepak/Seraune/frontend/src/admin/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport axios from 'axios';\n\nconst Dashboard = () => {\n  const [stats, setStats] = useState({\n    totalMessages: 0,\n    unreadMessages: 0,\n    lastMessageDate: null\n  });\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n\n  // Fetch dashboard statistics\n  useEffect(() => {\n    const fetchDashboardStats = async () => {\n      try {\n        // Get the admin token from localStorage\n        const token = localStorage.getItem('adminToken');\n        \n        // If no token, redirect to login\n        if (!token) {\n          navigate('/admin/login');\n          return;\n        }\n\n        // Fetch dashboard stats with authorization header\n        const response = await axios.get('/api/admin/dashboard-stats', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        setStats(response.data);\n        setIsLoading(false);\n      } catch (err) {\n        setError('Failed to fetch dashboard statistics');\n        setIsLoading(false);\n        \n        // If unauthorized, redirect to login\n        if (err.response?.status === 401) {\n          navigate('/admin/login');\n        }\n      }\n    };\n\n    fetchDashboardStats();\n  }, [navigate]);\n\n  // Logout handler\n  const handleLogout = () => {\n    // Remove the admin token\n    localStorage.removeItem('adminToken');\n    // Redirect to login page\n    navigate('/admin/login');\n  };\n\n  // Handle loading and error states\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-xl\">Loading dashboard...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-red-500\">{error}</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-8\">\n      <div className=\"container mx-auto\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-800\">Admin Dashboard</h1>\n          <button \n            onClick={handleLogout}\n            className=\"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded\"\n          >\n            Logout\n          </button>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          {/* Messages Card */}\n          <div className=\"bg-white shadow-md rounded-lg p-6\">\n            <h2 className=\"text-xl font-semibold mb-4\">Messages</h2>\n            <div className=\"space-y-2\">\n              <p>Total Messages: <span className=\"font-bold\">{stats.totalMessages}</span></p>\n              <p>Unread Messages: <span className=\"font-bold text-red-500\">{stats.unreadMessages}</span></p>\n              {stats.lastMessageDate && (\n                <p>Last Message: {new Date(stats.lastMessageDate).toLocaleString()}</p>\n              )}\n            </div>\n            <Link \n              to=\"/admin/messages\" \n              className=\"mt-4 block text-center bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded\"\n            >\n              View Messages\n            </Link>\n          </div>\n\n          {/* Additional Dashboard Widgets */}\n          <div className=\"bg-white shadow-md rounded-lg p-6\">\n            <h2 className=\"text-xl font-semibold mb-4\">Quick Actions</h2>\n            <div className=\"space-y-4\">\n              <Link \n                to=\"/admin/messages\" \n                className=\"block bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded text-center\"\n              >\n                Manage Messages\n              </Link>\n              {/* Add more quick action buttons as needed */}\n            </div>\n          </div>\n\n          <div className=\"bg-white shadow-md rounded-lg p-6\">\n            <h2 className=\"text-xl font-semibold mb-4\">System Information</h2>\n            <div className=\"space-y-2\">\n              <p>Last Login: {new Date().toLocaleString()}</p>\n              {/* You can add more system info here */}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}